<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-1583542706025" width="605.555" height="1024.263" viewBox="0 0 605.555 1024.263"><style>#mermaid-1583542706025 .label{font-family:&apos;trebuchet ms&apos;,verdana,arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1583542706025 .node circle,#mermaid-1583542706025 .node path,#mermaid-1583542706025 .node polygon,#mermaid-1583542706025 .node rect{fill:#ececff;stroke:#9370db;stroke-width:1px}#mermaid-1583542706025 .node .label{text-align:center}#mermaid-1583542706025 .arrowheadPath{fill:#333}#mermaid-1583542706025 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1583542706025 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1583542706025 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}:root{--mermaid-font-family:&apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family:&quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive;--mermaid-font-family:&quot;trebuchet ms&quot;, verdana, arial}</style><style>#mermaid-1583542706025{color:#000;font:16px &quot;trebuchet ms&quot;,verdana,arial}</style><g><g class="output"><g class="clusters" transform="translate(0, 0)"><g style="opacity:1" id="subGraph0" class="cluster" transform="translate(331.69921875,262.390625)"><rect width="320.203" height="281.25" x="-160.102" y="-140.625"/><g id="mermaid-1583542706025Text" class="label"><g transform="translate(0, -126.625) translate(-65.6328125,-11.875)"><foreignObject width="131.27" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Initialize State</div></foreignObject></g></g></g></g><g class="edgePaths"><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead555)" d="M331.69921875,71.765625L331.69921875,96.765625L331.69921875,121.765625L331.69921875,146.765625" class="path"/><defs><marker id="arrowhead555" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead556)" d="M331.69921875,190.515625L331.69921875,215.515625L331.69921875,240.515625" class="path"/><defs><marker id="arrowhead556" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead557)" d="M331.69921875,284.265625L331.69921875,309.265625L331.69921875,334.265625" class="path"/><defs><marker id="arrowhead557" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead558)" d="M331.69921875,378.015625L331.69921875,403.015625L331.69921875,428.015625L332.19921875,453.5156265258789" class="path"/><defs><marker id="arrowhead558" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead559)" d="M271.43394146512316,641.9659711892443L178,739.1062469482422L178,797.8562469482422L178,844.7312469482422L178,869.7312469482422" class="path"/><defs><marker id="arrowhead559" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead560)" d="M392.9644975230733,641.9659727528057L485.3984375,739.1062469482422L485.3984375,775.9812469482422" class="path"/><defs><marker id="arrowhead560" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead561)" d="M485.3984375,819.7312469482422L485.3984375,844.7312469482422L485.3984375,869.7312469482422" class="path"/><defs><marker id="arrowhead561" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead562)" d="M178,913.4812469482422L178,938.4812469482422L306.67058104865964,981.5033366698516" class="path"/><defs><marker id="arrowhead562" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g><g style="opacity:1" class="edgePath" transform="translate(0, 0)"><path style="fill:none" marker-end="url(#arrowhead563)" d="M485.3984375,913.4812469482422L485.3984375,938.4812469482422L356.72785645134036,981.5033366698516" class="path"/><defs><marker id="arrowhead563" markerHeight="6" markerUnits="strokeWidth" markerWidth="8" orient="auto" refX="9" refY="5" viewBox="0 0 10 10"><path style="stroke-width:1;stroke-dasharray:1,0" d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"/></marker></defs></g></g><g class="edgeLabels"><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(178,797.8562469482422) translate(-101.7265625,-11.875)"><foreignObject width="203.457" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">Got Token Successfully</span></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(485.3984375,739.1062469482422) translate(-40.6484375,-11.875)"><foreignObject width="81.309" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel">No Token</span></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g><g style="opacity:1" class="edgeLabel"><g class="label" transform="translate(0, 0) translate(0,0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap"><span class="edgeLabel"/></div></foreignObject></g></g></g><g class="nodes" transform="translate(0, 0)"><g style="opacity:1" id="AttemptCount" class="node" transform="translate(331.69921875,262.390625)"><rect width="250.203" height="43.75" x="-125.102" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-115.1015625,-11.875)"><foreignObject width="230.215" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Increment Attempt Count</div></foreignObject></g></g></g><g style="opacity:1" id="PromptOptions" class="node" transform="translate(331.69921875,168.640625)"><rect width="217.141" height="43.75" x="-108.57" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-98.5703125,-11.875)"><foreignObject width="197.148" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Persist PromptOptions</div></foreignObject></g></g></g><g style="opacity:1" id="Timeout" class="node" transform="translate(331.69921875,356.140625)"><rect width="228.75" height="43.75" x="-114.375" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-104.375,-11.875)"><foreignObject width="208.75" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Persist Prompt Timeout</div></foreignObject></g></g></g><g style="opacity:1" id="Start" class="node" transform="translate(331.69921875,39.8828125)"><circle x="-31.883" y="-21.875" r="31.883" class="label-container"/><g class="label"><g transform="translate(0,0) translate(-21.8828125,-11.875)"><foreignObject width="43.77" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Start</div></foreignObject></g></g></g><g style="opacity:1" id="GetUserToken" class="node" transform="translate(331.69921875,577.6234359741211)"><polygon points="124.608 0 249.216 -124.608 124.608 -249.216 0 -124.608" class="label-container" transform="translate(-124.60781250000001,124.60781250000001)"/><g class="label"><g transform="translate(0,0) translate(-106.578125,-11.875)"><foreignObject width="213.164" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">adapter.GetUserToken()</div></foreignObject></g></g></g><g style="opacity:1" id="ReturnToken" class="node" transform="translate(178,891.6062469482422)"><rect width="340" height="43.75" x="-170" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-160,-11.875)"><foreignObject width="320" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">End OAuthPrompt and Return Token</div></foreignObject></g></g></g><g style="opacity:1" id="SendOAuthCard" class="node" transform="translate(485.3984375,797.8562469482422)"><rect width="224.313" height="43.75" x="-112.156" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-102.15625,-11.875)"><foreignObject width="204.316" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">SendOAuthCardAsync()</div></foreignObject></g></g></g><g style="opacity:1" id="EndOfTurn" class="node" transform="translate(485.3984375,891.6062469482422)"><rect width="174.797" height="43.75" x="-87.398" y="-21.875" class="label-container" rx="0" ry="0"/><g class="label"><g transform="translate(0,0) translate(-77.3984375,-11.875)"><foreignObject width="154.805" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">Dialog.EndOfTurn</div></foreignObject></g></g></g><g style="opacity:1" id="End" class="node" transform="translate(331.69921875,989.8718719482422)"><circle x="-26.391" y="-21.875" r="26.391" class="label-container"/><g class="label"><g transform="translate(0,0) translate(-16.390625,-11.875)"><foreignObject width="32.793" height="23.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;white-space:nowrap">End</div></foreignObject></g></g></g></g></g></g></svg>